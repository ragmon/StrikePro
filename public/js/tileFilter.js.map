{"version":3,"names":[],"mappings":"","sources":["tileFilter.js"],"sourcesContent":["\n$(document).ready(function () {\n\n    var tile_list = $(\".tile__wrapper[data-tileid]\");\n    var _num_row = 0;\n    var num_col = 0;\n\n    var tile1Width = $(\".tile__wrapper[data-tileid='1']\").innerWidth(),\n        tile2Width = $(\".tile__wrapper[data-tileid='2']\").innerWidth();\n\n    var tileListWidth = $(\".tile-list\").width();\n    var tile_array = $(\".tile__wrapper[data-tileid]\");\n\n    var tile_row_array = [];\n\n    function row_object_constructor(top, row_width, elem_list) {\n        this.row_top_position = top;\n        this.row_width = row_width;\n        this.elem_list = elem_list;\n    }\n\n    function init() {\n        var screenWidth = window.innerWidth;\n        var top = 0;\n        var elem_newarray = [];\n        var row_width = 0;\n        var tile_array_length = $(tile_array).length;\n        for (var i = 0; i < tile_array_length; i++) {\n            if (top < $(tile_array[i]).position().top) {\n                top = $(tile_array[i]).position().top;\n                elem_newarray = $(tile_array).filter(function (index) {\n                    return $(this).position().top === top;\n                });\n                for (var a = 0; a < $(elem_newarray).length; a++) {\n                    row_width += $(elem_newarray[a]).innerWidth();\n                }\n                var new_row = new row_object_constructor(top, row_width, elem_newarray);\n                tile_row_array.push(new_row);\n                row_width = 0;\n            }\n        }\n\n        // console.log(tile_row_array);\n        // console.log(tile1Width + \" tile1Width\");\n        // console.log(tile2Width + \" tile2Width\");\n        // console.log(tile1Width * 4);\n        // console.log(tileListWidth);\n\n        // если сумма ширин элементов последней строки не равна ширине контейнера\n        if (tile_row_array[tile_row_array.length - 1].row_width != tileListWidth) {\n            // получаю разницу в виде колличества недостающих плиток\n            var raznica = Math.round((tileListWidth - tile_row_array[tile_row_array.length - 1].row_width) / tile1Width);\n            // коллекция элементов последней строки\n            var elemList = tile_row_array[tile_row_array.length - 1].elem_list;\n            // длинна коллекции элементов последней строки\n            var elemListLength = elemList.length;\n            var count = 2;\n            var statusWhile = true;\n            // если разница равна нулю или меньше\n            if (raznica <= 0) {\n                return\n\n            } else { // иначе едем дальше\n\n\n                if (screenWidth >= 1400) {\n                    console.log(raznica);\n                    switch (raznica) {\n                        case 4:\n                            console.log(\"колличество элементов в строке равно 1 == col-2_4\");\n                            while (statusWhile === true) {\n                                var prevRowElemList = tile_row_array[tile_row_array.length - count].elem_list;\n                                for (var i = 0; i < prevRowElemList.length; i++) {\n                                    if ($(prevRowElemList[i]).hasClass(\"col-4_8\")) {\n                                        $(prevRowElemList[i]).toggleClass(\"col-4_8 col-2_4\");\n                                        statusWhile = false;\n                                        return\n                                    }\n                                }\n                                count++;\n                            }\n                            break;\n                        case 3:\n                            if (elemListLength === 1) {\n                                console.log(\"колличество элементов в строке равно 1 == col-4_8\");\n                                // элемент последней строи сжимаем до  ячейки\n                                $(elemList[0]).toggleClass(\"col-4_8 col-2_4\");\n                                while (statusWhile === true) {\n                                    var prevRowElemList = tile_row_array[tile_row_array.length - count].elem_list;\n                                    for (var i = 0; i < prevRowElemList.length; i++) {\n                                        if ($(prevRowElemList[i]).hasClass(\"col-4_8\")) {\n                                            $(prevRowElemList[i]).toggleClass(\"col-4_8 col-2_4\");\n                                            statusWhile = false;\n                                            return\n                                        }\n                                    }\n                                    count++;\n                                }\n                            } else if (elemListLength === 2) {\n                                console.log(\"колличество элементов в строке равно 2\");\n                                if (window.location.pathname === \"/\") {\n                                    $(tile_cap_list.vk).insertAfter(elemList[elemListLength - 1]);\n                                }\n                                for (var i = 0; i < elemListLength; i++) {\n                                    if ($(elemList[i]).hasClass(\"col-2_4\")) {\n                                        $(elemList[i]).toggleClass(\"col-2_4 col-4_8\");\n                                    }\n                                }\n                            }\n                            break;\n                        case 2:\n                            console.log(\"колличество элементов в строке равно 3\");\n                            if (window.location.pathname === \"/\") {\n                                $(tile_cap_list.vk).insertBefore(elemList[elemListLength - 1]);\n                            }\n                            for (var i = 0; i < elemListLength; i++) {\n                                if ($(elemList[i]).hasClass(\"col-2_4\")) {\n                                    $(elemList[i]).toggleClass(\"col-2_4 col-4_8\");\n                                }\n                            }\n                            break;\n                        case 1:\n                            console.log(\"колличество элементов в строке равно 4\");\n                            if (window.location.pathname === \"/\") {\n                                $(tile_cap_list.vk).insertBefore(elemList[elemListLength - 1]);\n                            }\n                            break;\n                    }\n\n                } else if (screenWidth >= 1024) {\n                    console.log(raznica);\n                    switch (raznica) {\n                        case 3:\n                            console.log(\"Элементов в строке 1\");\n                            while (statusWhile === true) {\n                                var prevRowElemList = tile_row_array[tile_row_array.length - count].elem_list;\n                                for (var i = 0; i < prevRowElemList.length; i++) {\n                                    if ($(prevRowElemList[i]).hasClass(\"col-md-6\")) {\n                                        $(prevRowElemList[i]).toggleClass(\"col-md-6 col-md-3\");\n                                        statusWhile = false;\n                                        return\n                                    }\n                                }\n                                count++;\n                            }\n                            break;\n                        case 2:\n                            console.log(\"колличество элементов в строке равно 3\");\n                            if (elemListLength === 1) {\n                                console.log(\"колличество элементов в строке равно 1 == равен двум\");\n                                // элемент последней строи сжимаем до  ячейки\n                                $(elemList[0]).toggleClass(\"col-md-6 col-md-3\");\n                                while (statusWhile === true) {\n                                    var prevRowElemList = tile_row_array[tile_row_array.length - count].elem_list;\n                                    for (var i = 0; i < prevRowElemList.length; i++) {\n                                        if ($(prevRowElemList[i]).hasClass(\"col-md-6\")) {\n                                            $(prevRowElemList[i]).toggleClass(\"col-md-6 col-md-3\");\n                                            statusWhile = false;\n                                            return\n                                        }\n                                    }\n                                    count++;\n                                }\n                            } else if (elemListLength === 2) {\n                                console.log(\"колличество элементов в строке равно 2\");\n                                for (var i = 0; i < elemListLength; i++) {\n                                    if ($(elemList[i]).hasClass(\"col-md-3\")) {\n                                        $(elemList[i]).toggleClass(\"col-md-3 col-md-6\");\n                                    }\n                                }\n                            }\n                            break;\n                        case 1:\n                            console.log(\"колличество элементов в строке равно 3\");\n                            $(tile_cap_list.vk).insertBefore(elemList[elemListLength - 1]);\n                            break;\n                    }\n\n                } else if (screenWidth >= 768) {\n                    console.log(raznica);\n                    switch (raznica) {\n                        case 2:\n                            console.log(\"колличество элементов в строке равно 1\");\n                            $(tile_cap_list.vk).insertBefore(elemList[elemListLength - 1]);\n                            $(elemList[0]).toggleClass(\"col-sm-4 col-sm-8\");\n                            break;\n                        case 1:\n                            console.log(\"колличество элементов в строке равно 2 илиширина одного равна двум\");\n                            $(tile_cap_list.vk).insertBefore(elemList[elemListLength - 1]);\n                            break;\n                    }\n                } else {\n                    return\n                }\n            }\n\n        }\n\n\n    }\n\n    function toggle_tile_class(row_length, _array) {\n        for (var a = 0; a < _array.length; a++) {\n            switch (row_length) {\n                case 5:\n                    if ($(_array[a]).hasClass(\"col-4_8\")) {\n                        $(_array[a]).toggleClass(\"col-4_8 col-2_4\");\n                        _num_row += 1;\n                        return\n                    }\n                    break;\n                case 4:\n                    if ($(_array[a]).hasClass(\"col-md-6\")) {\n                        $(_array[a]).toggleClass(\"col-md-6 col-md-3\");\n                        _num_row += 1;\n                        return\n                    }\n                    break;\n                case 3:\n                    if ($(_array[a]).hasClass(\"col-sm-8\")) {\n                        $(_array[a]).toggleClass(\"col-sm-8 col-sm-4\");\n                        _num_row += 1;\n                        return false\n                    }\n                    break;\n            }\n        }\n\n    }\n\n    function tile_check() {\n        var _array = [],\n            _num = 0,\n            length = tile_list.length,\n            w = window.innerWidth,\n            row_length;\n        if (w >= 1400) {\n            row_length = 5;\n        } else if (w >= 992) {\n            row_length = 4;\n        } else if (w >= 768) {\n            row_length = 3;\n        } else {\n            return\n        }\n\n        if (w >= 768) {\n            for (var i = 0; i < length; i++) {\n                _num += $(tile_list[i]).data(\"tileid\");\n                num_col += _num;\n                _array.push(tile_list[i]);\n                if (_num > row_length) {\n                    toggle_tile_class(row_length, _array);\n                    _num = 0;\n                    _array.length = 0;\n                } else if (_num === row_length) {\n                    _num_row += 1;\n                    _num = 0;\n                    _array.length = 0;\n                }\n            }\n        }\n        init();\n    }\n\n    // $(window).resize(function () {\n    //     var screenWidth = window.innerWidth;\n    // });\n\n\n    if (tile_list.length !== 0 && location.pathname === '/') {\n        tile_check();\n    }\n})"],"file":"tileFilter.js"}